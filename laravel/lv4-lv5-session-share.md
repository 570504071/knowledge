# lv4 与 lv5 的 session 共享实现

laravel 框架正处在 v4 到 v5 的过度时期，在这个过程中，我们估计会遇到不同应用中会有 v4 和 v5 共存的现象。

这样，我们就需要面对处理，状态共享的问题。最具体的就是用户登录状态的共享。在具体实现层面也就是 session 的共享如何实现。

经测试，lv4 与 lv5 在 session 处理这部分没有改动，需要主题的是，lv session 部分都是自行实现的，与 php 本身的 session 机制无关。

所以要实现 session 共享需要有如下条件：

1. 应用需要属于同一个一级域名下，因为 session 机制终归还是需要通过 cookie 来实现，cookie 有跨域安全保护，所以需要在同一个一级域名下。另外，如果需要跨域名共享，那么这个问题便引申为 sso 问题，这个另论，不在 lv 框架范畴之内。


2. 修改 session 配置，driver 设置要一致，如果是 file 等类型，还需要指定一致的保存对象。为了方便可以直接指定 cookie 类型。

3. session 配置中的 cookie 需要设置一致

4. session 配置中的 domain 需要设置一直，且为一级域名，需要注意的是在 开发 环境下的配置